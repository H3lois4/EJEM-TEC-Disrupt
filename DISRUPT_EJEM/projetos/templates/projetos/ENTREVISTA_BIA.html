{% extends "base.html" %}
{% load static %}

{% block title %}Entrevistas BIA - {{ projeto.nome }}{% endblock %}

{% block titulo_pagina %}
    <span>ENTREVISTAS BIA</span>
{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/tabelas.css' %}">
{% endblock %}

{% block content %}
<div class="classificacao-container">
    <header class="header-interno">
        <h1>Entrevistas BIA para o Projeto: {{ projeto.nome }}</h1>
    </header>

    {% if entrevistas %}
        <div class="table-responsive-custom" style="margin-top: 25px;">
            <table class="parametrizacao-grid-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Área</th>
                        <th>Macroprocesso</th>
                        <th>Processo</th>
                        <th>Subprocesso</th>
                        <th>Descrição</th>
                        <th>Aspectos Regulatórios</th>
                        <th>Aspectos Contratuais</th>
                        <th>Entradas (Interfaces)</th>
                        <th>Saídas (Interfaces)</th>
                        <th>Volumetrias (Interfaces)</th>
                        <th>Volumetrias Críticas</th>
                        <th>SLAs Volumetrias (h)</th>
                        <th>Recursos Humanos</th>
                        <th>Regime de Operação</th>
                        <th>Equipe Crítica</th>
                        <th>Contingências (RH)</th>
                        <th>SLAs (RH)</th>
                        <th>Fornecedores</th>
                        <th>Lead Time (Insumos)</th>
                        <th>Contingências (Insumos)</th>
                        <th>SLAs (Insumos)</th>
                        <th>Sistemas TI/TA</th>
                        <th>Sistemas Críticos (Usuário)</th>
                        <th>Contingências (Sistemas)</th>
                        <th>SLAs (Sistemas)</th>
                        <th>Equipamentos</th>
                        <th>Equipamentos Críticos</th>
                        <th>SLAs (Equipamentos)</th>
                        <th>Pontos de Criticidade</th>
                        <th>Pior Cenário</th>
                        <th>MTPD (h)</th>
                        <th>Motivo MTPD</th>
                        <th>RTO (h)</th>
                        <th>RPO (h)</th>
                        <th>Observações</th>
                        <th>Ações</th>
                    </tr>
                </thead>
                <tbody>
                    {% for entrevista in entrevistas %}
                    <tr>
                        <td>{{ entrevista.id }}</td>
                        <td>{{ entrevista.area|default_if_none:"-" }}</td>
                        <td>{{ entrevista.macroprocesso|default_if_none:"-" }}</td>
                        <td>{{ entrevista.processo|default_if_none:"-" }}</td>
                        <td>{{ entrevista.subprocesso|default_if_none:"-" }}</td>
                        <td>{{ entrevista.descricao|truncatewords:15|default_if_none:"-" }}</td>
                        <td>{{ entrevista.aspectos_regulatorios|truncatewords:15|default_if_none:"-" }}</td>
                        <td>{{ entrevista.aspectos_contratuais|truncatewords:15|default_if_none:"-" }}</td>
                        <td>{{ entrevista.entradas_interface|truncatewords:15|default_if_none:"-" }}</td>
                        <td>{{ entrevista.saidas_interface|truncatewords:15|default_if_none:"-" }}</td>
                        <td>{{ entrevista.volumetrias_interface|truncatewords:15|default_if_none:"-" }}</td>
                        <td>{{ entrevista.volumetrias_criticas|truncatewords:15|default_if_none:"-" }}</td>
                        <td>{{ entrevista.slas_volumetrias|default_if_none:"-" }}</td>
                        <td>{{ entrevista.rh|truncatewords:15|default_if_none:"-" }}</td>
                        <td>{{ entrevista.regime_operacao_equipe|truncatewords:15|default_if_none:"-" }}</td>
                        <td>{{ entrevista.equipe_critica|truncatewords:15|default_if_none:"-" }}</td>
                        <td>{{ entrevista.contingencias_rh|truncatewords:15|default_if_none:"-" }}</td>
                        <td>{{ entrevista.slas_rh|default_if_none:"-" }}</td>
                        <td>{{ entrevista.fornecedores|truncatewords:15|default_if_none:"-" }}</td>
                        <td>{{ entrevista.lead_time_insumos|default_if_none:"-" }}</td>
                        <td>{{ entrevista.contingencias_insumos|truncatewords:15|default_if_none:"-" }}</td>
                        <td>{{ entrevista.slas_insumos|default_if_none:"-" }}</td>
                        <td>{{ entrevista.sistemas_ti_ta|truncatewords:15|default_if_none:"-" }}</td>
                        <td>{{ entrevista.sistemas_criticos_usuario|truncatewords:15|default_if_none:"-" }}</td>
                        <td>{{ entrevista.contingencias_sistemas|truncatewords:15|default_if_none:"-" }}</td>
                        <td>{{ entrevista.slas_sistemas|default_if_none:"-" }}</td>
                        <td>{{ entrevista.equipamentos|truncatewords:15|default_if_none:"-" }}</td>
                        <td>{{ entrevista.equipamentos_criticos|truncatewords:15|default_if_none:"-" }}</td>
                        <td>{{ entrevista.slas_equipamentos|default_if_none:"-" }}</td>
                        <td>{{ entrevista.pontos_criticidade|truncatewords:15|default_if_none:"-" }}</td>
                        <td>{{ entrevista.pior_cenario|truncatewords:15|default_if_none:"-" }}</td>
                        <td>{{ entrevista.mtpd_horas|default_if_none:"-" }}</td>
                        <td>{{ entrevista.descricao_motivo_mtpd|truncatewords:15|default_if_none:"-" }}</td>
                        <td>{{ entrevista.rto_horas|default_if_none:"-" }}</td>
                        <td>{{ entrevista.rpo_horas|default_if_none:"-" }}</td>
                        <td>{{ entrevista.observacoes|truncatewords:15|default_if_none:"-" }}</td>
                        <td>
                            <a href="{% url 'projetos:editar_entrevista_bia' projeto.id entrevista.id %}" class="btn-editar-tabela">Editar</a>
                            <form method="post" action="{% url 'projetos:deletar_entrevista_bia' projeto.id entrevista.id %}" style="display:inline; margin-top: 5px;">
                                {% csrf_token %}
                                <button type="submit" class="btn-deletar-tabela" onclick="return confirm('Tem certeza que deseja excluir esta entrevista?');">Excluir</button>
                            </form>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <div class="empty-table-message" style="margin-top: 20px;">
            <p>Nenhuma entrevista BIA encontrada para este projeto.</p>
        </div>
    {% endif %}

    <div style="margin-top: 25px; display: flex; gap: 15px;">
        <a href="{% url 'projetos:adicionar_entrevista_bia' projeto.id %}" class="btn-principal">Adicionar Nova Entrevista</a>
        <a href="{% url 'projetos:detalhe_projeto' projeto.id %}" class="btn-secundario">Voltar para Detalhes do Projeto</a>
    </div>
</div>
{% endblock %}