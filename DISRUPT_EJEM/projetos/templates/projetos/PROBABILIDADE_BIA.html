{% extends "base.html" %}
{% load static %}

{% block title %}Probabilidade BIA - {{ projeto.nome }}{% endblock %}

{% block titulo_pagina %}
    <span>PROBABILIDADE</span>
{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/tabelas.css' %}">
{% endblock %}

{% block content %}
<div class="classificacao-container">
    <header class="header-interno">
        <h1>{{ projeto.nome }}</h1>
    </header>

    {% if entradas_probabilidade %}
        <div class="tabelas-wrapper" style="align-items: flex-start; margin-top: 25px;">

            <div class="dados-grid">
                
                <div class="grid-header">ID</div>
                <div class="grid-header">PROCESSOS</div>
                <div class="grid-header">NICHO</div>
                <div class="grid-header">AÇÕES</div>

                {% for entrada in entradas_probabilidade %}
                    <div class="grid-cell">{{ entrada.id }}</div>
                    <div class="grid-cell" style="white-space: normal; text-align: left; justify-content: flex-start;">{{ entrada.processos }}</div>
                    <div class="grid-cell" style="white-space: normal;">{{ entrada.nicho }}</div>
                    <div class="grid-cell" style="flex-direction: column; gap: 5px;">
                        <a href="{% url 'projetos:editar_probabilidade_bia' projeto.id entrada.id %}" class="btn-editar-tabela">Editar</a>
                        <form method="post" action="{% url 'projetos:deletar_probabilidade_bia' projeto.id entrada.id %}" style="display:inline; margin: 0;">
                            {% csrf_token %}
                            <button type="submit" class="btn-deletar-tabela" onclick="return confirm('Tem certeza que deseja excluir este processo?');">Excluir</button>
                        </form>
                    </div>
                {% endfor %}
                
            </div>
            <div class="tabela probabilidade" style="min-width: 400px; flex-grow: 1;">
                <h2>LEGENDA</h2>
                <table class="legenda">
                    <thead>
                        <tr>
                            <th>NÍVEL</th>
                            <th>DESCRIÇÃO</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Muito Provável</td>
                            <td>É quase certo que o evento vai ocorrer. Evento de ocorrência esperada ou quase certa nos próximos 2 anos. (Espera-se que ocorra na maioria das vezes).</td>
                        </tr>
                        <tr>
                            <td>Provável</td>
                            <td>É mais provável que o evento ocorra do que não ocorra. Evento provavelmente ocorrerá nos próximos 2 anos. (Deverá ocorrer diversas vezes).</td>
                        </tr>
                        <tr>
                            <td>Possível</td>
                            <td>É mais provável que o evento não ocorra do que ocorra. Evento de possível ocorrência nos próximos 2 anos. (Ocorrerá uma vez ou outra).</td>
                        </tr>
                        <tr>
                            <td>Remota</td>
                            <td>Chance remota de que o evento ocorra. Evento nunca ocorreu em organizações do mesmo segmento e possui chance remota de ocorrer nos próximos 2 anos. (Ocorrerá somente em circunstâncias excepcionais).</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

    {% else %}
        <div class="empty-table-message" style="margin-top: 25px;">
            <p>Nenhum processo adicionado para análise de probabilidade.</p>
        </div>
    {% endif %}

    <div style="margin-top: 25px; display: flex; gap: 15px;">
        <a href="{% url 'projetos:adicionar_probabilidade_bia' projeto.id %}" class="btn-principal">Adicionar novo Processo...</a>
        <a href="{% url 'projetos:detalhe_projeto' projeto.id %}" class="btn-secundario">Voltar para Detalhes do Projeto</a>
    </div>
</div>
{% endblock %}